<%- model_class = Quiz -%>
<div>
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>
<p class="quiz_actions">
<%= page_entries_info @quizzes %>
<span class="btn btn-default toggle_answer">答えの表示・非表示</span>
<%= link_to t('.new', :default => t("helpers.links.new")),
            new_quiz_path,
            :class => 'btn btn-primary' %>
</p>
<%= form_tag quizzes_path, method: :get do %>
  <p>キーワード：<%= search_field_tag :keyword, params[:keyword], class: "form-control" %></p>
  <p>
    タグ：<%= text_field_tag :tags, params[:tags], id: "quiz_tag_list", data: {role: "tagsinput"} ,class: "form-control" %>
    <button type="button" class="btn btn-default tags_remove_all">
      <span class="fa fa-times"></span>
    </button>
  </p>
  <p class="most_used_tags">
  よく使われているタグ：
  <% ActsAsTaggableOn::Tag.most_used(20).each do |t| %>
    <span class="tag label label-info"><%= t.name %></span>
  <% end %>
  </p>
  <p data-toggle="buttons">
    <label class="btn btn-default<%= ' active' if params[:stared] %>">
      <%= check_box_tag :stared, params[:stared], params[:stared], class: "checkbox-inline" %>
      <i class="fa fa-star fa-2x" style="color:gold;"></i>
    </label>
  </p>
  <p><%= submit_tag 'search', name: nil, class: "btn btn-default" %></p>
<% end %>
<% @quizzes.order('id desc').each do |quiz| %>
<div>
  <div class="quiz_header">
    <ul class="main-nav">
      <li>No.<%= quiz.id %></li>
      <li><%= my_star quiz %></li>
      <li>
        tags:
        <% quiz.tag_list.each do |tag| %>
        <span class="label label-info"><%= tag %></span>
        <% end %>
      </li>
      <li>
        <%= link_to t('.edit', :default => t("helpers.links.edit")),
                    edit_quiz_path(quiz), :class => 'btn btn-default btn-xs' if quiz.created_by? current_user %>
        <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                    quiz_path(quiz),
                    :method => :delete,
                    :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                    :class => 'btn btn-xs btn-danger'  if quiz.created_by? current_user %>
      </li>
    </ul>

  </div>
  <div class="main">
    <section class="col-1">
      <h2><%= model_class.human_attribute_name(:question) %></h2>
      <div><%= markdown quiz.question %></div>
    </section>
    <section class="col-2">
      <h2><%= model_class.human_attribute_name(:answer) %></h2>
      <div><%= markdown quiz.answer %></div>
    </section>
    <section class="col-3">
      <h2><%= model_class.human_attribute_name(:etc) %></h2>
      <div><%= markdown quiz.etc %></div>
    </section>
  </div>
</div>
<hr>
<% end %>

<%= paginate @quizzes %>